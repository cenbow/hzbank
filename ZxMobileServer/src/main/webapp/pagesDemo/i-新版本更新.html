<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>直销银行</title>
<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link type="text/css" rel="stylesheet" href="../css/reset.css">
<link type="text/css" rel="stylesheet" href="../css/global.css">
<link type="text/css" rel="stylesheet" href="../css/common_1.css">
<link type="text/css" rel="stylesheet" href="../css/common_2.css">
<link type="text/css" rel="stylesheet" href="../css/common_3.css">
<link type="text/css" rel="stylesheet" href="../css/layouts.css">
<link type="text/css" rel="stylesheet" href="../css/index.css">
<link type="text/css" rel="stylesheet" href="../css/banks.css">
<link type="text/css" rel="stylesheet" href="../css/animate.css">
</head>

<body class="gray-bg"  ontouchstart="">
  	
  <div class="new2016 updateVersion">
  	<div class="midPic">
    	<div class="myCircle" data-time="0" id="timeoutCircle">
            <div class="left"><i></i></div>
            <div class="right"><i></i></div>
        </div>
        <div class="close"  id="timeoutCircleClose"></div>
        <div class="btnGrp row">
        	<button class="cell b">短信发送</button>
        	<button class="cell a">复制链接</button>
        </div>
    </div>
  </div>	
  <script type="text/javascript" src="../scripts/libs/jquery/jquery-2.1.3.min.js"></script>
  <script>
  $(function(){
	//circle
	function setCircle(elem, x, attr){
	   var lcir = elem.querySelector('.left i');
	   var rcir = elem.querySelector('.right i'); 
	   elem.setAttribute('data-time', attr)
	   if(x == 100){
		  elem.className = 'myCircle done';
	   }else if(x<=50){
		 elem.className = 'myCircle';
		 var deg = 3.6*x - 180;
		 lcir.style.transform = lcir.style.webkitTransform = 'rotate('+deg+'deg)';
		 rcir.style.transform = rcir.style.webkitTransform = '';
	   }else{
		 elem.className = 'myCircle';
		 var deg = 3.6*(x-50) - 180;
		 lcir.style.transform = lcir.style.webkitTransform = 'rotate(0deg)';
		 rcir.style.transform = rcir.style.webkitTransform = 'rotate('+deg+'deg)';
	   }
	}
	var timeoutCircle = document.getElementById('timeoutCircle');
	var timeoutCircleClose = document.getElementById('timeoutCircleClose');
	var time = 5; // 5秒倒计时
	var per = 100; // 百分比起始
	var timeoutTimer;
	setCircle(timeoutCircle, per, time);
	function setonce(){
		timeoutTimer && clearTimeout(timeoutTimer);
		timeoutTimer = setTimeout(function(){
			time--;
			per -= 20;
			setCircle(timeoutCircle, per, time);
			console.log(per)
			timeoutTimer && clearTimeout(timeoutTimer);
			if(time === 0){
				timeoutCircleClose.style.display = 'block';
				timeoutCircle.style.display = 'none';
			}else{
				setonce()
			}
		}, 1000)
	}
	setonce()
  })
  </script> 
</body>
</html>
